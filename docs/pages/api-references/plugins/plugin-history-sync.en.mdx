import { APITable } from "../../../components/APITable";

# `@stackflow/plugin-history-sync`

Stackflow does not use the browser's history by default. This plugin synchronizes the stack state with the current browser's history.

## Installation

```bash npm2yarn copy
npm install @stackflow/plugin-history-sync
```

## Usage

```ts showLineNumbers filename="stackflow.ts" copy
import { stackflow } from "@stackflow/react";
import { historySyncPlugin } from "@stackflow/plugin-history-sync";
import { MyHome } from "./MyHome";
import { MyArticle } from "./MyArticle";
import { NotFoundPage } from "./NotFoundPage";

const { Stack, useFlow } = stackflow({
  activities: {
    MyHome,
    MyArticle,
    NotFoundPage,
  },
  plugins: [
    // ...
    historySyncPlugin({
      routes: {
        /**
         * You can link the registered activity with the URL template.
         */
        MyHome: "/",
        MyArticle: "/articles/:articleId",
        NotFoundPage: "/404",
      },
      /**
       * If a URL that does not correspond to the URL template is given, it moves to the `fallbackActivity`.
       */
      fallbackActivity: ({ context }) => "NotFoundPage",
      /**
       * Uses the hash portion of the URL (i.e. window.location.hash)
       */
      useHash: false,
    }),
  ],
});
```

## Reference

<APITable>
|                   |                                                               |                                                                                                            |
| ----------------- | ------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| routes            | `{ [key in keyof T]: RouteLike<T[key]>; }` (optional)        | A mapping of activities to their route definitions. Used to define the routes if not using a config object. |
| config            | `Config<ActivityDefinition<string>>` (optional)              | A config object that includes activity definitions with paths.                                               |
| fallbackActivity  | `(args: { initialContext: any }) => K`                      | A function that determines the fallback activity to be used when no matching route is found.                 |
| useHash           | `boolean` (optional)                                         | Determines if hash-based routing should be used. Defaults to false.                                          |
| history           | `History` (optional)                                         | A custom history object used for managing navigation state. Defaults to browser or memory history.           |
| urlPatternOptions | `UrlPatternOptions` (optional)                               | Options for URL pattern matching and generation, affecting how URLs are constructed and parsed.              |
</APITable>
